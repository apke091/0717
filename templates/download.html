{% extends "base.html" %}
{% block title %}下載專區{% endblock %}

{% block content %}
<div class="container" style="margin-top: 90px; max-width: 900px;">
  <h2 class="mb-4">📂 下載專區</h2>

  {% if file_list %}
  <table class="table align-middle">
    <thead>
      <tr>
        <th>📑 標題</th>
        <th>🕒 上傳時間</th>
        <th>⬇️ 下載</th>
      </tr>
    </thead>
    <tbody>
      {% for row in file_list %}
      <tr>
        <td>{{ row.title }}</td>
        <td>{{ row.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          <!-- ⬇️ 灰色下載按鈕 -->
          <a class="btn btn-outline-secondary btn-sm"
             href="{{ url_for('download_file', file_id=row.id) }}">
              ⌛下載
          </a>

          {% if session.get('role') == 'admin' %}
          <form method="post"
                action="{{ url_for('delete_download', file_id=row.id) }}"
                style="display:inline">
            <button class="btn btn-outline-danger btn-sm"
                    onclick="return confirm('確定要刪除 {{ row.title }}？')">
                🗑️ 刪除
            </button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">
    目前沒有檔案可供下載。
  </div>
  {% endif %}
</div>
{% endblock %}
