{% extends "base.html" %}
{% block title %}ä¸‹è¼‰å°ˆå€{% endblock %}

{% block content %}
<div class="container" style="margin-top: 90px; max-width: 900px;">
  <h2 class="mb-4">ğŸ“‚ ä¸‹è¼‰å°ˆå€</h2>

  {% if file_list %}
  <table class="table align-middle">
    <thead>
      <tr>
        <th>ğŸ“‘ æ¨™é¡Œ</th>
        <th>ğŸ•’ ä¸Šå‚³æ™‚é–“</th>
        <th>â¬‡ï¸ ä¸‹è¼‰</th>
      </tr>
    </thead>
    <tbody>
      {% for row in file_list %}
      <tr>
        <td>{{ row.title }}</td>
        <td>{{ row.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          <!-- â¬‡ï¸ ç°è‰²ä¸‹è¼‰æŒ‰éˆ• -->
          <a class="btn btn-outline-secondary btn-sm"
             href="{{ url_for('download_file', file_id=row.id) }}">
              âŒ›ä¸‹è¼‰
          </a>

          {% if session.get('role') == 'admin' %}
          <form method="post"
                action="{{ url_for('delete_download', file_id=row.id) }}"
                style="display:inline">
            <button class="btn btn-outline-danger btn-sm"
                    onclick="return confirm('ç¢ºå®šè¦åˆªé™¤ {{ row.title }}ï¼Ÿ')">
                ğŸ—‘ï¸ åˆªé™¤
            </button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">
    ç›®å‰æ²’æœ‰æª”æ¡ˆå¯ä¾›ä¸‹è¼‰ã€‚
  </div>
  {% endif %}
</div>
{% endblock %}
