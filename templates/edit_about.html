{% extends "base.html" %}
{% block title %}ç·¨è¼¯é—œæ–¼æˆ‘å€‘{% endblock %}

{% block content %}
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
<!-- åœ–ç‰‡å¯æ‹–æ›³èª¿æ•´å¤§å° -->
<script src="https://unpkg.com/quill-image-resize-module@3.0.0/image-resize.min.js"></script>

<div class="container" style="margin-top: 90px">
  <h2>ç·¨è¼¯ã€Œé—œæ–¼æˆ‘å€‘ã€</h2>

  <form method="POST" onsubmit="return prepareForm();">
    <!-- ç·¨è¼¯å™¨ -->
    <div id="quill-editor" style="height: 500px; background:#fff; border:1px solid #ccc;">
      {{ content | safe }}
    </div>

    <input type="hidden" name="content" id="hidden-content">

    <button type="submit" class="btn btn-success mt-3">ğŸ’¾ å„²å­˜</button>
    <a href="{{ url_for('about') }}" class="btn btn-secondary mt-3">å–æ¶ˆ</a>
  </form>
</div>

<style>
  /* åœ–ç‰‡è‡ªé©æ‡‰ã€ç­‰æ¯”ç¸®æ”¾èˆ‡ç½®ä¸­ */
  #quill-editor img { max-width: 100%; height: auto; }
  .ql-editor .ql-align-center img { display:block; margin:0 auto; }
</style>

<script>
  Quill.register('modules/imageResize', ImageResize);

  const quill = new Quill('#quill-editor', {
    theme: 'snow',
    placeholder: 'è«‹è¼¸å…¥å…§å®¹...',
    modules: {
      toolbar: [
        [{ header: [1, 2, 3, false] }],
        ['bold', 'italic', 'underline'],
        [{ 'align': [] }],
        [{ list: 'ordered' }, { list: 'bullet' }],
        ['link', 'image', 'blockquote'],
        ['clean']
      ],
      imageResize: { modules: [ 'Resize', 'DisplaySize' ] }
    }
  });

  function prepareForm() {
    document.getElementById('hidden-content').value = quill.root.innerHTML;
    return true;
  }
</script>
{% endblock %}
