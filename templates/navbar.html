<nav class="navbar navbar-light bg-light px-3 fixed-top shadow-sm">
  <!-- æ¼¢å ¡æŒ‰éˆ• -->
  <button class="btn btn-outline-secondary" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideMenu" aria-controls="sideMenu">
    â˜°
  </button>

  <!-- å“ç‰Œåç¨± -->
  <a class="navbar-brand ms-2 text-decoration-none text-dark" href="{{ url_for('index') }}">
    å¤§å°å—èŠ³è–°é¦™æ¤ç‰©ç²¾æ²¹æœå‹™äººå“¡è·æ¥­å·¥æœƒ
  </a>

  <!-- å³å´ï¼šä½¿ç”¨è€… -->
  <div class="ms-auto d-flex align-items-center gap-2">
    {% if session.get("username") %}
      <span class="me-2 text-secondary">ğŸ‘‹ Dear. {{ session.get('username') }}</span>
      <a href="{{ url_for('change_password') }}" class="btn btn-outline-secondary btn-sm">æ”¹å¯†ç¢¼</a>
      <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm">ç™»å‡º</a>
    {% else %}
      <a href="{{ url_for('login') }}" class="btn btn-outline-success btn-sm">ç™»å…¥</a>
      <a href="{{ url_for('register') }}" class="btn btn-outline-primary btn-sm">è¨»å†Š</a>
    {% endif %}
  </div>
</nav>

<!-- å·¦å´ Offcanvas -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="sideMenu" aria-labelledby="sideMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="sideMenuLabel">MENU</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>

  <div class="offcanvas-body">
    <!-- ä¸€èˆ¬å°è¦½ -->
    <ul class="nav flex-column mb-3">
      <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">é¦–é </a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('about') }}">é—œæ–¼æœ¬æœƒ</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('news') }}">æœ€æ–°è³‡è¨Š</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('downloads') }}">ä¸‹è¼‰å°ˆå€</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('rent') }}">æ•™å®¤ç§Ÿå€Ÿ</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('contact') }}">è¯çµ¡æˆ‘å€‘</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('shop') }}">ç²¾æ²¹å•†åŸ</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('video_gallery') }}">å½±éŸ³å°ˆå€</a></li>
    </ul>

    {% if session.get("username") %}
      <hr>
      <!-- è³¼ç‰©è»Š -->
      <ul class="nav flex-column mb-3">
        <li class="nav-item">
  <a class="nav-link d-inline-flex align-items-center" href="{{ url_for('cart') }}" id="cartLink">
    ğŸ›’ è³¼ç‰©è»Š
    {% if (cart_count|int) > 0 %}
      <span class="ms-1 cart-badge">{{ (cart_count|int) if (cart_count|int) <= 99 else '99+' }}</span>
    {% endif %}
  </a>
</li>


      </ul>
    {% endif %}

    {% if session.get('role') == 'admin' %}
      <hr>
      <!-- ç¶œåˆç®¡ç† -->
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link d-flex justify-content-between align-items-center"
             data-bs-toggle="collapse" href="#adminMenu" role="button"
             aria-expanded="false" aria-controls="adminMenu">
            ç¶œåˆç®¡ç†
            <span class="arrow">&#9656;</span> <!-- â–¶ -->
          </a>
          <div class="collapse ps-2" id="adminMenu">
            <ul class="nav flex-column admin-submenu">
              <li class="nav-item"><a class="nav-link" href="{{ url_for('manage_users') }}">å¸³è™Ÿç®¡ç†</a></li>
              <li class="nav-item"><a class="nav-link" href="{{ url_for('manage_products') }}">å•†å“ç®¡ç†</a></li>
              <li class="nav-item"><a class="nav-link" href="{{ url_for('manage_rents') }}">ç¢ºèªç§Ÿå€Ÿè³‡è¨Š</a></li>
              <li class="nav-item"><a class="nav-link" href="{{ url_for('upload_file') }}">ä¸Šå‚³æª”æ¡ˆ</a></li>
              <li class="nav-item"><a class="nav-link" href="{{ url_for('upload_video') }}">ä¸Šå‚³å½±ç‰‡</a></li>
              <li class="nav-item"><a class="nav-link" href="{{ url_for('edit_about') }}">é—œæ–¼æˆ‘å€‘ï¼ˆç·¨è¼¯ï¼‰</a></li>
            </ul>
          </div>
        </li>
      </ul>
    {% endif %}
  </div>
</div>

<!-- CSS -->
<style>
  .arrow {
    transition: transform 0.2s ease;
  }
  .nav-link[aria-expanded="true"] .arrow {
    transform: rotate(90deg); /* â–¶ è½‰ â–¼ */
  }

 /* 1ï¸âƒ£ ç®¡ç†å­é¸å–®å­—é«”é¡è‰²æ”¹æˆç°è‰² */
.admin-submenu .nav-link {
  color: #6c757d !important;  /* ç°è‰²å­— */
  padding: 5px 15px;
}
.admin-submenu .nav-link:hover {
  background-color: #e9ecef; /* hover æ™‚æ·ºç°åº• */
  color: #000; /* hover æ™‚å­—è®Šé»‘ */
  border-radius: 3px;
}

/* 2ï¸âƒ£ Offcanvas é—œé–‰æŒ‰éˆ•èƒŒæ™¯é¡è‰² */
.offcanvas .btn-close {
  background-color: #dee2e6;   /* æ·¡ç°è‰²èƒŒæ™¯ */
  border-radius: 50%;          /* åœ“å½¢èƒŒæ™¯ */
  opacity: 1;                  /* ç¢ºä¿é¡¯ç¤º */
}
.offcanvas .btn-close:hover {
  background-color: #cce5ff;   /* hover æ™‚æ·¡è—è‰² */
}


  /* âœ… æ¼¢å ¡é¸å–®è—è‰²å­— hover æ•ˆæœ */
  .offcanvas-body .nav-link {
    color: blue;
    text-decoration: none;
    display: block;
    padding: 8px 12px;
    border-radius: 5px;
  }
  .offcanvas-body .nav-link:hover {
    background-color: #e9ecef; /* ç°è‰²èƒŒæ™¯ */
    color: blue;               /* æ–‡å­—ä¿æŒè—è‰² */
  }
</style>
