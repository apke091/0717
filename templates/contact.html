{% extends "base.html" %}
{% block title %}聯絡我們{% endblock %}

{% block content %}
<div class="container" style="margin-top: 90px">
  <h1>聯絡我們</h1>

  {# ✅ 支援分類的 flash 訊息 #}
  {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="alert alert-{{ 'info' if category not in ['success','danger','warning','info'] else category }} mt-3" role="alert">
          {{ msg }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST" novalidate>
    {# ✅ 隱藏欄位：簡易防機器人 #}
    <input type="text" name="website" style="display:none">

    <div class="mb-3">
      <label class="form-label">姓名</label>
      <input type="text" name="name" class="form-control" placeholder="請輸入您的姓名" required>
    </div>

    <div class="mb-3">
      <label class="form-label">電子信箱</label>
     <input name="email" type="email" class="form-control"
       placeholder="name@example.com" required
       inputmode="email"
       pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$">

    </div>

    <div class="mb-3">
      <label class="form-label">留言內容</label>
      <textarea name="message" class="form-control" rows="5" placeholder="請輸入您的問題或建議" required></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">請輸入驗證碼：{{ captcha_question }}</label>
      <input type="text" class="form-control" name="captcha_answer" placeholder="請輸入答案" required>
    </div>

    <button type="submit" class="btn btn-success">送出</button>
  </form>

  <hr>
  <div class="mt-4">
    <h5>📱 也可以透過以下方式聯絡我們：</h5>

    <!-- Facebook -->
    <a href="https://www.facebook.com/profile.php?id=100063997512043&locale=zh_TW" target="_blank" class="me-3">
      <img src="https://img.icons8.com/color/48/000000/facebook-new.png" alt="Facebook" style="height: 40px;">
    </a>

    <!-- Line -->
    <a href="https://lin.ee/Dl3yuwr" target="_blank" class="me-3">
      <img src="https://img.icons8.com/color/48/000000/line-me.png" alt="Line" style="height: 40px;">
    </a>

    <!-- Instagram -->
    <a href="https://www.instagram.com/mindaroma?igsh=aGsxNGZ4M25jODVl" target="_blank">
      <img src="https://img.icons8.com/color/48/000000/instagram-new.png" alt="Instagram" style="height: 40px;">
    </a>
  </div>
</div>

{# ✅ 2 秒自動關閉 .alert #}
<script>
  window.addEventListener('DOMContentLoaded', () => {
    const alerts = document.querySelectorAll('.alert');
    if (!alerts.length) return;
    setTimeout(() => {
      alerts.forEach(a => {
        a.classList.add('fade', 'show');
        a.style.transition = 'opacity .3s';
        a.style.opacity = '0';
        setTimeout(() => a.remove(), 300);
      });
    }, 2000);
  });
</script>
{% endblock %}
